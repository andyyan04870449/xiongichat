# RAG向量搜尋測試工具 - 快速使用指南

## 🚀 快速開始

### 方法1: 使用簡化啟動腳本（推薦）
```bash
cd backend
./scripts/rag_test.sh
```

### 方法2: 直接使用Python腳本
```bash
cd backend
source venv/bin/activate
python scripts/rag_search_tester.py -i
```

## 📝 使用範例

### 互動模式
```bash
./scripts/rag_test.sh
# 然後輸入查詢內容，例如：
# 美沙冬治療
# 戒毒機構 高雄
# 心理諮商服務
```

### 命令行模式
```bash
# 基本搜尋
./scripts/rag_test.sh "美沙冬治療"

# 自訂參數
./scripts/rag_test.sh "戒毒機構" -k 10 -t 0.5

# 加入過濾條件
./scripts/rag_test.sh "心理諮商" -c "services" -l "zh-tw"
```

## 🎯 常用查詢範例

```bash
# 戒毒相關
./scripts/rag_test.sh "美沙冬治療"
./scripts/rag_test.sh "戒毒機構 高雄"
./scripts/rag_test.sh "戒癮治療"

# 心理諮商
./scripts/rag_test.sh "心理諮商服務"
./scripts/rag_test.sh "自殺防治"
./scripts/rag_test.sh "1995生命線"

# 醫療服務
./scripts/rag_test.sh "婦幼保健"
./scripts/rag_test.sh "孕婦照護"
./scripts/rag_test.sh "青少年醫療"

# 法律相關
./scripts/rag_test.sh "法律諮詢"
./scripts/rag_test.sh "家暴防治"
```

## ⚙️ 參數說明

| 參數 | 說明 | 範例 |
|------|------|------|
| `-k` | 返回結果數量 | `-k 10` |
| `-t` | 相似度閾值 (0.0-1.0) | `-t 0.5` |
| `-c` | 類別過濾 | `-c "services"` |
| `-l` | 語言過濾 | `-l "zh-tw"` |

## 🔍 搜尋結果說明

工具會顯示：
1. **嵌入生成**: 查詢向量的資訊
2. **RAG檢索器結果**: 使用與AI工作流相同的方式搜尋
3. **直接SQL搜尋結果**: 用於對比的直接查詢結果
4. **結果對比**: 兩種搜尋方式的比較

每個結果包含：
- 📊 相似度分數
- 📁 來源
- 🏷️ 類別  
- 📝 內容預覽
- 🔍 元數據

## 💡 使用技巧

1. **提高搜尋準確度**:
   - 使用更具體的關鍵字
   - 調整相似度閾值 (0.3-0.7)
   - 使用類別過濾

2. **如果沒有結果**:
   - 降低相似度閾值
   - 嘗試不同的關鍵字
   - 檢查是否有相關資料

3. **對比搜尋效果**:
   - 觀察RAG檢索器和直接SQL的差異
   - 比較相似度分數
   - 驗證搜尋邏輯

## 🆘 常見問題

**Q: 腳本無法執行？**
A: 確保在backend目錄中，並已啟用虛擬環境

**Q: 搜尋結果為空？**
A: 嘗試降低相似度閾值或使用更通用的關鍵字

**Q: 如何退出互動模式？**
A: 輸入 `quit`、`exit` 或按 `Ctrl+C`

## 📚 更多資訊

詳細說明請參考: `scripts/README_RAG_TESTER.md`
